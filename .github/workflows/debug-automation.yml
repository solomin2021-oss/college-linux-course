name: üêõ –û—Ç–ª–∞–¥–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

on:
  pull_request:
    types: [opened]
  workflow_dispatch:  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  debug-automation:
    runs-on: ubuntu-latest
    steps:
      - name: üõéÔ∏è Checkout code
        uses: actions/checkout@v4
        
      - name: üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
        run: |
          echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤..."
          pwd
          ls -la
          ls -la .github/
          ls -la .github/scripts/
          echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
          
      - name: üß™ –¢–µ—Å—Ç —Å–∫—Ä–∏–ø—Ç–∞
        uses: actions/github-script@v6
        with:
          script: |
            console.log('=== üß™ –¢–ï–°–¢ –°–ö–†–ò–ü–¢–ê ===');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω
            try {
              const fs = require('fs');
              const path = require('path');
              
              const scriptPath = path.join(process.env.GITHUB_WORKSPACE, '.github', 'scripts', 'project-automation.js');
              console.log('üìÅ –ü—É—Ç—å –∫ —Å–∫—Ä–∏–ø—Ç—É:', scriptPath);
              
              if (fs.existsSync(scriptPath)) {
                console.log('‚úÖ –§–∞–π–ª —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞–π–¥–µ–Ω!');
                
                // –ß–∏—Ç–∞–µ–º –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º —Å–∫—Ä–∏–ø—Ç
                const { automateProjectBoard } = require(scriptPath);
                const result = await automateProjectBoard({ github, context });
                console.log('üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç:', result);
                
              } else {
                console.log('‚ùå –§–∞–π–ª —Å–∫—Ä–∏–ø—Ç–∞ –ù–ï –Ω–∞–π–¥–µ–Ω!');
                console.log('üìÇ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ .github/scripts:');
                const scriptsDir = path.join(process.env.GITHUB_WORKSPACE, '.github', 'scripts');
                if (fs.existsSync(scriptsDir)) {
                  const files = fs.readdirSync(scriptsDir);
                  console.log('–§–∞–π–ª—ã:', files);
                } else {
                  console.log('–ü–∞–ø–∫–∞ scripts –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
                }
              }
              
            } catch (error) {
              console.error('üí• –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–µ:', error);
            }
